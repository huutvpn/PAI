<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CBT PAI – Login Siswa</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{
    font-family: Arial, sans-serif;
    background:#f2f4f7;
    padding:20px;
}
.container{
    max-width:900px;
    margin:auto;
    background:#fff;
    padding:20px;
    border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,.1);
}
h1,h2{text-align:center}
input{
    width:100%;
    padding:10px;
    margin:10px 0;
    font-size:16px;
}
.timer{
    text-align:center;
    font-size:20px;
    color:red;
    margin-bottom:15px;
}
.question{
    font-size:18px;
    margin-bottom:10px;
}
.options label{
    display:block;
    padding:8px;
    border:1px solid #ddd;
    border-radius:5px;
    margin-bottom:8px;
    cursor:pointer;
}
.options label:hover{background:#eef}
button{
    padding:10px 15px;
    font-size:16px;
    background:#007bff;
    color:#fff;
    border:none;
    border-radius:6px;
    cursor:pointer;
    width:100%;
}
button:hover{background:#0056b3}
.hidden{display:none}
</style>
</head>
<body>

<div class="container">

<!-- LOGIN -->
<div id="login">
    <h1>Login Siswa</h1>
    <input type="text" id="studentName" placeholder="Masukkan Nama Siswa">
    <button onclick="startQuiz()">Mulai Ujian</button>
</div>

<!-- QUIZ -->
<div id="quizBox" class="hidden">
<h1>CBT PAI</h1>
<p><b>Nama:</b> <span id="displayName"></span></p>
<div class="timer" id="timer">Sisa Waktu: 30:00</div>

<div id="quiz">
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <button onclick="next()">Soal Berikutnya</button>
</div>
</div>

<!-- HASIL -->
<div id="result" class="hidden"></div>

</div>

<script>
// ===== LOGIN =====
let student="";
function startQuiz(){
    student=document.getElementById("studentName").value.trim();
    if(student===""){alert("Nama wajib diisi");return;}
    document.getElementById("login").classList.add("hidden");
    document.getElementById("quizBox").classList.remove("hidden");
    document.getElementById("displayName").innerText=student;
    show();
}

// ===== SOAL =====
const questions=[
{q:"Iman kepada Allah termasuk rukun iman ke-",o:["1","2","3","4"],a:0},
{q:"Allah Maha Melihat disebut juga",o:["Al-‘Alim","As-Sami’","Al-Bashir","Al-Qadir"],a:2},
{q:"Jumlah rukun iman ada",o:["4","5","6","7"],a:2},
{q:"Malaikat penyampai wahyu adalah",o:["Mikail","Israfil","Izrail","Jibril"],a:3},
{q:"Rasul terakhir adalah",o:["Isa","Musa","Muhammad","Ibrahim"],a:2},
{q:"Salat wajib sehari semalam berjumlah",o:["3","4","5","6"],a:2},
{q:"Salat Subuh berjumlah rakaat",o:["2","3","4","5"],a:0},
{q:"Puasa wajib dilakukan pada bulan",o:["Syawal","Muharram","Ramadan","Dzulhijjah"],a:2},
{q:"Zakat termasuk rukun Islam ke-",o:["2","3","4","5"],a:1},
{q:"Berdoa hanya kepada Allah adalah bentuk",o:["Syirik","Iman","Kufur","Dosa"],a:1}
];

// ===== VAR =====
let i=0,score=0;

// ===== SUARA =====
function speak(t){
 let u=new SpeechSynthesisUtterance(t);
 u.lang="id-ID";
 speechSynthesis.speak(u);
}

// ===== TAMPIL =====
function show(){
 let q=questions[i];
 question.innerText=(i+1)+". "+q.q;
 speak(q.q);
 let h="";
 q.o.forEach((x,j)=>{
  h+=`<label><input type="radio" name="opt" value="${j}"> ${x}</label>`;
 });
 options.innerHTML=h;
}

// ===== NEXT =====
function next(){
 let s=document.querySelector('input[name="opt"]:checked');
 if(!s){alert("Pilih jawaban!");return;}
 if(+s.value===questions[i].a)score++;
 i++;
 if(i<questions.length)show();
 else finish();
}

// ===== HASIL =====
function finish(){
 document.getElementById("quizBox").classList.add("hidden");
 result.classList.remove("hidden");
 let nilai=Math.round(score/questions.length*100);
 result.innerHTML=`
 <h2>Hasil Ujian</h2>
 <p><b>Nama:</b> ${student}</p>
 <p>Benar: ${score}</p>
 <p>Salah: ${questions.length-score}</p>
 <p><b>Nilai: ${nilai}</b></p>`;
 speak("Ujian selesai. Nilai kamu "+nilai);
}

// ===== TIMER =====
let time=1800;
setInterval(()=>{
 if(document.getElementById("quizBox").classList.contains("hidden"))return;
 let m=Math.floor(time/60);
 let s=time%60;
 timer.innerText=`Sisa Waktu: ${m}:${s<10?'0':''}${s}`;
 if(time--<=0)finish();
},1000);
</script>

</body>
</html>