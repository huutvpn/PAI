<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>CBT PAI 100 Soal</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<style>
body{font-family:Arial;background:#eef2f5;padding:20px}
.container{max-width:900px;margin:auto;background:#fff;padding:20px;border-radius:10px}
h1{text-align:center}
.timer{color:red;font-size:20px;text-align:center}
.question{font-size:18px;margin:10px 0}
.options label{display:block;padding:8px;border:1px solid #ddd;margin-bottom:6px;border-radius:5px;cursor:pointer}
.options label:hover{background:#f0f0f0}
button{padding:10px;font-size:16px;width:100%;background:#007bff;color:#fff;border:none;border-radius:5px}
.hidden{display:none}
input{width:100%;padding:10px;font-size:16px;margin-bottom:10px}
</style>
</head>
<body>

<div class="container">

<!-- LOGIN -->
<div id="login">
<h1>Ujian PAI</h1>
<input id="nama" placeholder="Masukkan Nama Siswa">
<button onclick="mulai()">Mulai Ujian</button>
</div>

<!-- QUIZ -->
<div id="quizBox" class="hidden">
<h1>CBT PAI</h1>
<p><b>Nama:</b> <span id="namaTampil"></span></p>
<div class="timer" id="timer">Sisa waktu: 60:00</div>
<div id="q"></div>
<div id="opsi" class="options"></div>
<button onclick="next()">Soal Berikutnya</button>
</div>

<!-- HASIL -->
<div id="hasil" class="hidden"></div>

</div>

<script>
// ================= LOGIN =================
let namaSiswa="";
let ujianSelesai=false;

function mulai(){
 namaSiswa=nama.value.trim();
 if(!namaSiswa){alert("Nama wajib diisi");return;}
 login.classList.add("hidden");
 quizBox.classList.remove("hidden");
 namaTampil.innerText=namaSiswa;
 tampil();
}

// ================= SOAL + JAWABAN =================
const soal=[
{q:"Iman kepada Allah termasuk rukun iman ke-",o:["1","2","3","4"],a:0},
{q:"Allah Maha Melihat disebut",o:["Al-Alim","As-Sami'","Al-Bashir","Al-Qadir"],a:2},
{q:"Jumlah rukun iman ada",o:["4","5","6","7"],a:2},
{q:"Malaikat penyampai wahyu adalah",o:["Mikail","Israfil","Izrail","Jibril"],a:3},
{q:"Kitab suci Nabi Musa adalah",o:["Zabur","Injil","Taurat","Al-Qurâ€™an"],a:2},
{q:"Rasul terakhir adalah",o:["Isa","Musa","Muhammad","Ibrahim"],a:2},
{q:"Orang yang menyekutukan Allah disebut",o:["Mukmin","Musyrik","Munafik","Kafir"],a:1},
{q:"Al-Qurâ€™an diturunkan selama",o:["10 th","15 th","20 th","23 th"],a:3},
{q:"Kitab Zabur diturunkan kepada Nabi",o:["Musa","Isa","Daud","Ibrahim"],a:2},
{q:"Iman kepada takdir disebut iman kepada",o:["Rasul","Kitab","Qada & Qadar","Hari akhir"],a:2},

{q:"Salat wajib sehari semalam berjumlah",o:["3","4","5","6"],a:2},
{q:"Salat Subuh berjumlah rakaat",o:["2","3","4","5"],a:0},
{q:"Syarat sah salat adalah",o:["Membaca Al-Qurâ€™an","Menutup aurat","Duduk","Tidur"],a:1},
{q:"Rukun salat pertama adalah",o:["Berdiri","Takbiratul ihram","Al-Fatihah","Salam"],a:1},
{q:"Menghadap kiblat hukumnya",o:["Sunnah","Wajib","Makruh","Mubah"],a:1},
{q:"Puasa wajib dilakukan bulan",o:["Syawal","Muharram","Ramadan","Dzulhijjah"],a:2},
{q:"Zakat fitrah sebanyak",o:["1 kg","2 kg","2,5 kg","5 kg"],a:2},
{q:"Orang yang menerima zakat disebut",o:["Muzakki","Amil","Mustahik","Malik"],a:2},
{q:"Haji wajib bagi yang",o:["Kaya","Sehat","Mampu","Pandai"],a:2},
{q:"Wukuf dilakukan di",o:["Mina","Muzdalifah","Arafah","Mekah"],a:2},

{q:"Berkata jujur adalah akhlak",o:["Mazmumah","Mahmudah","Buruk","Haram"],a:1},
{q:"Berbakti kepada orang tua hukumnya",o:["Sunnah","Wajib","Makruh","Haram"],a:1},
{q:"Membuang sampah sembarangan termasuk",o:["Akhlak baik","Ibadah","Akhlak buruk","Sedekah"],a:2},
{q:"Contoh perilaku sabar adalah",o:["Marah","Mengeluh","Menahan emosi","Dendam"],a:2},
{q:"Menolong sesama disebut",o:["Hasad","Tolong-menolong","Riya","Takabur"],a:1},
];

// ðŸ‘‰ otomatis jadi 100 soal
while(soal.length<100){
 soal.push({...soal[soal.length%25]});
}

// ================= VAR =================
let i=0,skor=0;

// ================= SUARA =================
function bicara(t){
 let u=new SpeechSynthesisUtterance(t);
 u.lang="id-ID";
 speechSynthesis.speak(u);
}

// ================= TAMPIL SOAL =================
function tampil(){
 let s=soal[i];
 q.innerHTML="<div class='question'>"+(i+1)+". "+s.q+"</div>";
 bicara(s.q);
 let html="";
 s.o.forEach((x,j)=>{
  html+=`<label><input type="radio" name="jwb" value="${j}"> ${x}</label>`;
 });
 opsi.innerHTML=html;
}

// ================= NEXT =================
function next(){
 let p=document.querySelector('input[name=jwb]:checked');
 if(!p){alert("Pilih jawaban!");return;}
 if(+p.value===soal[i].a)skor++;
 i++;
 if(i<soal.length)tampil();
 else selesai();
}

// ================= HASIL =================
function selesai(){
 ujianSelesai=true;
 localStorage.removeItem("ujian_langgar");
 quizBox.classList.add("hidden");
 hasil.classList.remove("hidden");
 let nilai=Math.round(skor/soal.length*100);
 hasil.innerHTML=`
 <h2>Hasil Ujian</h2>
 <p>Nama: ${namaSiswa}</p>
 <p>Benar: ${skor}</p>
 <p>Salah: ${soal.length-skor}</p>
 <h3>Nilai: ${nilai}</h3>`;
 bicara("Ujian selesai. Nilai kamu "+nilai);
}

// ================= TIMER =================
let waktu=3600;
setInterval(()=>{
 if(quizBox.classList.contains("hidden"))return;
 let m=Math.floor(waktu/60);
 let d=waktu%60;
 timer.innerText=`Sisa waktu: ${m}:${d<10?'0':''}${d}`;
 if(--waktu<=0)selesai();
},1000);

// ================= MODE UJIAN ANTI REFRESH =================
window.addEventListener("beforeunload",e=>{
 if(!ujianSelesai){
  e.preventDefault();
  e.returnValue="Ujian sedang berlangsung!";
 }
});

window.addEventListener("unload",()=>{
 if(!ujianSelesai){
  localStorage.setItem("ujian_langgar","1");
 }
});

window.onload=()=>{
 if(localStorage.getItem("ujian_langgar")==="1"){
  localStorage.removeItem("ujian_langgar");
  alert("Anda keluar dari ujian. Ujian dianggap selesai.");
  selesai();
 }
};
</script>

</body>
</html>