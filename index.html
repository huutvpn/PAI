<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CBT PAI 1000 Soal</title>

<style>
body{
  margin:0;
  font-family:Arial, Helvetica, sans-serif;
  background:linear-gradient(135deg,#0f2027,#203a43,#2c5364);
  color:#fff;
}
.container{
  max-width:760px;
  margin:auto;
  padding:20px;
}
.card{
  background:#111;
  padding:20px;
  border-radius:18px;
  box-shadow:0 20px 40px rgba(0,0,0,.6);
}
h1{text-align:center;margin-top:0}
button{
  width:100%;
  padding:12px;
  border-radius:10px;
  border:none;
  margin-top:10px;
  font-size:15px;
  background:#ff9800;
  font-weight:bold;
  cursor:pointer;
}
.opsi{
  background:#1b1b1b;
  padding:12px;
  border-radius:10px;
  margin-top:10px;
  cursor:pointer;
}
.opsi:hover{background:#2a2a2a}
.meta{
  display:flex;
  justify-content:space-between;
  font-size:14px;
  margin-top:10px;
}
.timer{
  font-weight:bold;
  color:#00e676;
}
.timer.danger{
  color:#ff5252;
}
footer{
  text-align:center;
  font-size:12px;
  opacity:.7;
  margin-top:15px;
}
</style>
</head>

<body>
<div class="container">
<div class="card">

<h1>üïå CBT PAI (1000 Soal)</h1>
<p style="text-align:center;font-size:14px;opacity:.8">
Timer aktif ‚Ä¢ Soal acak ‚Ä¢ Tidak ada soal ulang
</p>

<button onclick="mulai()">‚ñ∂ Mulai Ujian</button>

<div class="meta">
  <div id="info">Belum mulai</div>
  <div id="timer" class="timer">‚è± 60:00</div>
  <div id="skor">Skor: 0</div>
</div>

<div id="box"></div>

<button onclick="stopSuara()">üîá Stop Suara</button>

<footer>¬© 2026 ‚Ä¢ CBT PAI Online</footer>

</div>
</div>

<script>
// ===================== SUARA =====================
function baca(teks){
  speechSynthesis.cancel();
  const u = new SpeechSynthesisUtterance(teks);
  u.lang = "id-ID";
  speechSynthesis.speak(u);
}
function stopSuara(){ speechSynthesis.cancel(); }

// ===================== BANK SOAL UNIK =====================
function buat1000Soal(){
  const topik = [
    {q:"Rukun Islam berjumlah", o:["3","4","5","6"], a:2},
    {q:"Salat Magrib terdiri dari", o:["2","3","4","5"], a:1},
    {q:"Sikap jujur termasuk akhlak", o:["tercela","terpuji","buruk","dilarang"], a:1},
    {q:"Hijrah Nabi Muhammad SAW ke kota", o:["Makkah","Thaif","Madinah","Yaman"], a:2},
    {q:"Kitab suci umat Islam adalah", o:["Injil","Zabur","Taurat","Al-Qur'an"], a:3}
  ];

  const soal=[];
  let id=1;
  while(soal.length<1000){
    for(const t of topik){
      if(soal.length>=1000) break;
      soal.push({
        id:id++,
        q:t.q,
        o:[...t.o],
        a:t.a
      });
    }
  }
  return shuffle(soal);
}

function shuffle(arr){
  for(let i=arr.length-1;i>0;i--){
    const j=Math.floor(Math.random()*(i+1));
    [arr[i],arr[j]]=[arr[j],arr[i]];
  }
  return arr;
}

// ===================== CBT TIMER =====================
let waktu = 60 * 60; // ‚è± 60 menit (UBAH DI SINI)
let timerInterval;

function startTimer(){
  updateTimer();
  timerInterval = setInterval(()=>{
    waktu--;
    updateTimer();
    if(waktu <= 0){
      clearInterval(timerInterval);
      selesaiWaktu();
    }
  },1000);
}

function updateTimer(){
  const m = Math.floor(waktu/60);
  const s = waktu % 60;
  const t = document.getElementById("timer");
  t.innerText = `‚è± ${m}:${s.toString().padStart(2,"0")}`;
  if(waktu <= 300){ t.classList.add("danger"); } // 5 menit terakhir
}

function selesaiWaktu(){
  document.getElementById("box").innerHTML = `
    <h3>‚è∞ Waktu Habis</h3>
    <p>Skor akhir kamu: <b>${skor}/1000</b></p>
  `;
  baca("Waktu ujian telah habis");
}

// ===================== LOGIC CBT =====================
let soal=[], idx=0, skor=0;

function mulai(){
  soal = buat1000Soal(); // dibuat & diacak SEKALI
  idx = 0;
  skor = 0;
  waktu = 60 * 60; // reset waktu
  clearInterval(timerInterval);
  startTimer();
  document.getElementById("skor").innerText = "Skor: 0";
  tampil();
}

function tampil(){
  if(waktu <= 0) return;

  const box = document.getElementById("box");
  if(idx >= soal.length){
    clearInterval(timerInterval);
    box.innerHTML = `
      <h3>‚úÖ Ujian Selesai</h3>
      <p>Skor akhir: <b>${skor}/1000</b></p>
    `;
    baca("Ujian selesai");
    return;
  }

  const s = soal[idx];
  document.getElementById("info").innerText = `Soal ${idx+1} / 1000`;
  baca(s.q);

  let html = `<p>${s.q}</p>`;
  s.o.forEach((x,i)=>{
    html += `<div class="opsi" onclick="jawab(${i})">${x}</div>`;
  });
  box.innerHTML = html;
}

function jawab(p){
  if(waktu <= 0) return;
  if(p === soal[idx].a){
    skor++;
    baca("Jawaban benar");
  }else{
    baca("Jawaban salah");
  }
  document.getElementById("skor").innerText = "Skor: " + skor;
  idx++;
  setTimeout(tampil,500);
}
</script>

</body>
</html>