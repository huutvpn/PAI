<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<title>Kuis PAI + Suara + Timer</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<style>
body{
    font-family: Arial, sans-serif;
    background:#f4f6f8;
    padding:20px;
}
.container{
    max-width:700px;
    background:#fff;
    padding:20px;
    border-radius:10px;
    box-shadow:0 4px 10px rgba(0,0,0,.1);
}
h1{text-align:center}
.timer{
    font-size:18px;
    font-weight:bold;
    color:red;
    text-align:center;
    margin-bottom:15px;
}
.question{
    font-size:18px;
    margin-bottom:15px;
}
.options label{
    display:block;
    margin:8px 0;
    cursor:pointer;
}
button{
    padding:10px 15px;
    margin-top:15px;
    border:none;
    border-radius:6px;
    background:#007bff;
    color:#fff;
    font-size:16px;
    cursor:pointer;
}
button:hover{background:#0056b3}
.hidden{display:none}
</style>
</head>
<body>

<div class="container">
<h1>Kuis PAI</h1>
<div class="timer" id="timer">Sisa Waktu: 05:00</div>

<div id="quiz">
    <div class="question" id="question"></div>
    <div class="options" id="options"></div>
    <button onclick="nextQuestion()">Selanjutnya</button>
</div>

<div id="result" class="hidden"></div>
</div>

<script>
// ===== DATA SOAL =====
let questions = [
{
    q: "Balig menurut Islam adalah...",
    options: [
        "Sudah menikah",
        "Sudah mampu bekerja",
        "Sudah mencapai batas kewajiban syariat",
        "Sudah dewasa secara ekonomi"
    ],
    answer: 2
},
{
    q: "Salah satu tanda balig bagi laki-laki adalah...",
    options: [
        "Menstruasi",
        "Mimpi basah",
        "Hamil",
        "Menikah"
    ],
    answer: 1
},
{
    q: "Kewajiban utama setelah balig adalah...",
    options: [
        "Bekerja",
        "Belajar",
        "Melaksanakan ibadah wajib",
        "Menikah"
    ],
    answer: 2
}
];

// ===== ACAK SOAL =====
questions.sort(() => Math.random() - 0.5);

let index = 0;
let score = 0;

// ===== TEXT TO SPEECH =====
function speak(text){
    let msg = new SpeechSynthesisUtterance(text);
    msg.lang = "id-ID";
    speechSynthesis.speak(msg);
}

// ===== TAMPILKAN SOAL =====
function showQuestion(){
    let q = questions[index];
    document.getElementById("question").innerText = (index+1)+". "+q.q;
    speak(q.q);

    let optionsHTML = "";
    q.options.forEach((opt,i)=>{
        optionsHTML += `
        <label>
            <input type="radio" name="opt" value="${i}">
            ${opt}
        </label>`;
    });
    document.getElementById("options").innerHTML = optionsHTML;
}
showQuestion();

// ===== NEXT =====
function nextQuestion(){
    let selected = document.querySelector('input[name="opt"]:checked');
    if(!selected){
        alert("Pilih jawaban dulu!");
        return;
    }
    if(parseInt(selected.value) === questions[index].answer){
        score++;
    }
    index++;
    if(index < questions.length){
        showQuestion();
    }else{
        finishQuiz();
    }
}

// ===== HASIL =====
function finishQuiz(){
    document.getElementById("quiz").classList.add("hidden");
    document.getElementById("result").classList.remove("hidden");
    document.getElementById("result").innerHTML = `
        <h2>Hasil Akhir</h2>
        <p>Skor kamu: <b>${score} / ${questions.length}</b></p>
    `;
    speak("Kuis selesai. Nilai kamu "+score);
}

// ===== TIMER CBT =====
let time = 300; // 5 menit
let timer = setInterval(()=>{
    let m = Math.floor(time/60);
    let s = time%60;
    document.getElementById("timer").innerText =
        `Sisa Waktu: ${m}:${s<10?'0':''}${s}`;
    time--;
    if(time < 0){
        clearInterval(timer);
        finishQuiz();
    }
},1000);
</script>

</body>
</html>